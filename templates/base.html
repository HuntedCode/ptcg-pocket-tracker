{% load static tailwind_tags %}
{% load custom_filters %}

<!DOCTYPE html>
<html lang="en" data-theme="pokemon">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="PTCG Tracker - Manage your Pokemon TCG Pocket collection, find trading parners and community features!">
    <title>{% block title %}PTCG Pocket Tracker{% endblock %}</title>
    <link rel="icon" href="{% static 'images/icons/pokeball-favicon.png' %}" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    {% tailwind_css %}
</head>
<body class="bg-base-100 text-base-content min-h-screen flex flex-col">
    <nav class="navbar bg-base-100 shadow-xl rounded-box">
        <div class="navbar-start">
            <a href="{% url 'dashboard' %}" class="btn btn-ghost normal-case text-xl flex items-center {% if request.path == '/dashboard/' %}nav-focused bg-primary text-primary-content rounded-md hover:bg-primary{% else %} hover:text-primary{% endif %}">
                <img src="{% if request.path == '/dashboard/' %}{% static 'images/icons/pokeball-open-favicon.png' %}{% else %}{% static 'images/icons/pokeball-favicon.png' %}{% endif %}" alt="Pokeball Logo" class="w-8 h-8 mr-2">PTCG Pocket Tracker
            </a>
        </div>
        <div class="navbar-center hidden lg:flex">
            <ul class="menu menu-horizontal px-1 space-x-4 flex items-center font-semibold justify-around">
                <li class="min-w-[100px]"><a href="{% url 'tracker_set' 1 %}" class="{% if request.path|startswith:'/tracker/' %}nav-focused bg-accent text-primary-content rounded-md hover:bg-accent{% else %} hover:bg-neutral{% endif %} hover:text-neutral-content px-4 py-2 flex items-center justify-center">Tracker</a></li>
                <li class="min-w-[100px]"><a href="{% url 'wishlist' request.user.profile.share_token %}" class="{% if request.path|startswith:'/wishlist/' %}nav-focused bg-accent text-primary-content rounded-md hover:bg-accent{% else %} hover:bg-neutral{% endif %} hover:text-neutral-content px-4 py-2 flex items-center justify-center">Wishlist</a></li>
                <li class="min-w-[100px]"><a href="{% url 'trade_matches' %}" class="{% if request.path == '/trade/matches/' %}nav-focused bg-accent text-primary-content rounded-md hover:bg-accent{% else %} hover:bg-neutral{% endif %} hover:text-neutral-content px-4 py-2 flex items-center justify-center">Trade</a></li>

                <span class="flex items-center px-2 tooltip tooltip-bottom" data-tip="Did you know you're cute??" data-tip->
                    <img src="{% static random_icon %}" alt="Random Pokemon Icon" class="w-20 h-20">
                </span>

                <li class="min-w-[100px]">
                    <a href="{% url 'collection' %}" class="{% if request.path == '/collection/' %}nav-focused bg-accent text-primary-content rounded-md hover:bg-accent{% else %} hover:bg-neutral{% endif %} hover:text-neutral-content px-4 py-2 flex items-center justify-center{% if unseen_count > 0 %} tooltip tooltip-bottom unseen-tooltip" data-tip="{{ unseen_count }} New Cards!{% endif %}">
                    Collection
                    {% if unseen_count > 0 %}
                        <img class="unseen-notification-badge w-8 h-8" src="{% static 'images/icons/pokeball-noti.png' %}">
                    {% endif %}
                    </a>
                </li>
                <li class="min-w-[100px]"><a href="{% url 'pack_opener' %}" class="{% if request.path == '/pack/opener/' %}nav-focused bg-accent text-primary-content rounded-md hover:bg-accent{% else %} hover:bg-neutral{% endif %} hover:text-neutral-content px-4 py-2 flex items-center justify-center">Open Pack</a></li>
                <li class="min-w-[100px]"><a href="{% url 'profile' request.user.profile.share_token %}" class="{% if request.path|startswith:'/profile/' %}nav-focused bg-accent text-primary-content rounded-md hover:bg-accent{% else %} hover:bg-neutral{% endif %} hover:text-neutral-content px-4 py-2 flex items-center justify-center">Profile</a></li>
            </ul>
        </div>
        <div class="navbar-end">
            <form method="post" action="{% url 'logout' %}" class="inline">
                {% csrf_token %}
                <button type="submit" class="btn btn-ghost text-accent hover:text-accent-dark">Logout</button>
            </form>
        </div>
    </nav>
    <main class="container py-8 bg-base-200 rounded-box shadow-md m-4 flex-grow">
        {% block content %}{% endblock %}
    </main>
    <footer class="bg-neutral text-neutral-content text-center shadow-md py-4">
        <p>© 2025 PTCG Tracker - Built with ❤️ for the Pokemon Community - Developed By: Jeffrey Lowe (HuntedCode)</p>
        <nav class="flex justify-center space-x-4 pt-4">
            <a href="#" class="hover:text-secondary">About</a>
            <a href="#" class="hover:text-secondary">Contact</a>
            <a href="#" class="hover:text-secondary">Privacy</a>
        </nav>
    </footer>
</body>
</html>